<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kooora Laghouat</title>
    
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; }
        /* Live Pulse Animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        .live-indicator { animation: pulse-ring 2s infinite; }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù„Ù…Ø³ Ù„Ù„Ù‡ÙˆØ§ØªÙ */
        input, select, button { touch-action: manipulation; }
    </style>

    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase Compat SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "firebase/": "https://esm.sh/firebase@^12.7.0/",
    "@google/genai": "https://esm.sh/@google/genai@^1.33.0",
    "vite": "https://esm.sh/vite@^7.3.0",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-gray-50 min-h-screen text-gray-900 selection:bg-emerald-100 selection:text-emerald-900">
    <div id="root"></div>

    <script type="text/babel">
        // --- 1. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        
        const firebaseConfig = {
          apiKey: "AIzaSyAXLSZ5OqPEOnP0DUx3w75fU2xxiVkrWcE",
          authDomain: "koooralaghouat.firebaseapp.com",
          projectId: "koooralaghouat",
          storageBucket: "koooralaghouat.firebasestorage.app",
          messagingSenderId: "84750708348",
          appId: "1:84750708348:web:179ec7acf8fc2f357e23f9",
          measurementId: "G-4YSP7SWPGV"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ù‚ ÙˆØ§Ù„Ø¯ÙˆØ±ÙŠØ§Øª
        const LEAGUES_DATA = {
            "Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø£ÙˆÙ„ (ÙÙˆØ¬ Ø£)": [
                { name: "Ø´ Ø¨ Ø¹ÙŠÙ† Ø§Ù…ÙŠÙ†Ø§Ø³", logo: "https://lrfouargla.com/uploads/images/logos/1(1).png" },
                { name: "Ù†.Ø±.ØªÙ‚Ù†ØªÙˆØ±ÙŠÙ†", logo: "https://lrfouargla.com/uploads/images/logos/203-1601155957.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ Ø§Ù„ØºØ±Ø§Ø¨Ø©", logo: "https://lrfouargla.com/uploads/images/logos/sssx.png" },
                { name: "Ù… .Ø´Ø¨Ø§Ø¨ .Ø§Ù„Ù…Ø®Ø§Ø¯Ù…Ø©", logo: "https://lrfouargla.com/uploads/images/logos/sz.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø¨Ø±ÙŠØ§Ù†", logo: "https://lrfouargla.com/uploads/images/logos/47.png" },
                { name: "ØªØ±Ø¬ÙŠ ØªÙ‚Ø¯ÙŠØ¯ÙŠÙ†", logo: "https://lrfouargla.com/uploads/images/logos/133.png" },
                { name: "Ùˆ.Ø±.Ø¨.Ø§Ù„Ø¯Ø¨ÙŠÙ„Ø©", logo: "https://lrfouargla.com/uploads/images/logos/qqqqqq.png" },
                { name: "Ù†Ø§Ø¯ÙŠ Ø¨ÙˆØºÙØ§Ù„Ø©", logo: "https://lrfouargla.com/uploads/images/logos/23.png" },
                { name: "Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø¬Ù…ÙŠÙ„", logo: "https://lrfouargla.com/uploads/images/logos/CSBV%20(1).png" },
                { name: "Ù….Ùƒ.Ø£Ù…Ù„ Ø§Ù„Ù†Ø²Ù„Ø©", logo: "https://lrfouargla.com/uploads/images/logos/sss%20%E2%80%AB%E2%80%AC.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø§Ù„Ø±Ø¨Ø§Ø­", logo: "https://lrfouargla.com/uploads/images/logos/73.png" },
                { name: "Ø´Ø¨Ø§Ø¨ Ø³ÙŠØ¯ÙŠ Ø¨ÙˆØ¹Ø²ÙŠØ²", logo: "https://lrfouargla.com/uploads/images/logos/13.png" },
                { name: "Ø´Ø¨Ø§Ø¨ Ù‚ØµØ± Ø§Ù„Ø­ÙŠØ±Ø§Ù†", logo: "https://lrfouargla.com/uploads/images/logos/54.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø­Ø§Ø³ÙŠ Ø§Ù„Ø¯Ù„Ø§Ø¹Ø©", logo: "https://lrfouargla.com/uploads/images/logos/53.png" }
            ],
            "Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø£ÙˆÙ„ (ÙÙˆØ¬ Ø¨)": [
                { name: "Ø´Ø¨Ø§Ø¨ Ù‚ØµØ± ÙˆØ±Ù‚Ù„Ø©", logo: "https://lrfouargla.com/uploads/images/logos/15826488_199664807171500_3091424271281007906_n.gif" },
                { name: "ÙˆÙØ§Ù‚ Ø§Ù„Ù…ØºÙŠØ±", logo: "https://lrfouargla.com/uploads/images/logos/111.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ .Ø±. Ø¨.Ø§Ù„Ø£ØºÙˆØ§Ø·", logo: "https://lrfouargla.com/uploads/images/logos/IMG-20241109-WA0007.jpg" },
                { name: "ÙˆÙØ§Ù‚ Ø¹ÙŠÙ† Ù…Ø§Ø¶ÙŠ", logo: "https://lrfouargla.com/uploads/images/logos/125.png" },
                { name: "Ø£Ù…Ù„ Ø³ÙˆÙ", logo: "https://lrfouargla.com/uploads/images/logos/88.png" },
                { name: "Ø´Ø¨Ø§Ø¨ Ù†Ù‡Ù‚Ø§Ø±", logo: "https://lrfouargla.com/uploads/images/logos/102.png" },
                { name: "Ù‡Ù„Ø§Ù„ ØºØ±Ø¯Ø§ÙŠØ©", logo: "https://lrfouargla.com/uploads/images/logos/75.png" },
                { name: "Ø§Ù„ØªØ¶Ø§Ù…Ù† Ø§Ù„Ø³ÙˆÙÙŠ", logo: "https://lrfouargla.com/uploads/images/logos/72.png" },
                { name: "Ø¥. Ø§Ù„Ø±Ø¨Ø§Ø¶ÙŠ Ø§Ù„Ù…Ù†ÙŠØ¹ÙŠ", logo: "https://lrfouargla.com/uploads/images/logos/WhatsApp%20Image%202025-10-25%20%C3%A0%2022.02.03_23b4051f.jpg" },
                { name: "Ø´.Ø£.ØªÙ…Ù†Ø±Ø§Ø³Øª", logo: "https://lrfouargla.com/uploads/images/logos/100.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø¹ÙŠÙ† Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", logo: "https://lrfouargla.com/uploads/images/logos/40.png" },
                { name: "ÙˆÙØ§Ù‚ Ù…Ù‚Ø±", logo: "https://lrfouargla.com/uploads/images/logos/38.png" },
                { name: "Ø¥.Ø§Ù„Ø­Ù…Ø§Ø¯ÙŠÙ†", logo: "https://lrfouargla.com/uploads/images/logos/168-1531611858.png" },
                { name: "Ù†Ø¬Ù… Ø¨ÙˆØºÙØ§Ù„Ø©", logo: "https://lrfouargla.com/uploads/images/logos/NRNBO-02.png" }
            ],
            "Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ (ÙÙˆØ¬ Ø¬)": [
                { name: "Ù… .Ø´ .Ø§Ù„Ø«Ù†ÙŠØ© ØºØ±Ø¯Ø§ÙŠØ©", logo: "https://lrfouargla.com/uploads/images/logos/449-1634476753.png" },
                { name: "Ù…ÙˆÙ„ÙˆØ¯ÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", logo: "https://lrfouargla.com/uploads/images/logos/46.png" },
                { name: "Ø±Ø§Ø¦Ø¯ Ø§Ù„Ù…Ù†ÙŠØ¹Ø©", logo: "https://lrfouargla.com/uploads/images/logos/7.png" },
                { name: "Ø¨Ù† Ù†Ø§ØµØ± Ø¨Ù† Ø´Ù‡Ø±Ø©", logo: "https://lrfouargla.com/uploads/images/logos/49(1).png" },
                { name: "Ø¥.Ø¶Ø§ÙŠØ© Ø¨Ù† Ø¶Ø­ÙˆØ©", logo: "https://lrfouargla.com/uploads/images/logos/57(1).png" },
                { name: "Ù…Ø³ØªÙ‚Ø¨Ù„ Ù„Ù…Ø§Ø¶ÙŠ", logo: "https://lrfouargla.com/uploads/images/logos/56.png" },
                { name: "Ø±Ø§Ø¦Ø¯ Ø­Ø§Ø³ÙŠ Ø§Ù„Ù‚Ø§Ø±Ø©", logo: "https://lrfouargla.com/uploads/images/logos/134.png" },
                { name: "Ø¹ÙŠÙ† Ø³ÙŠØ¯ÙŠ Ø¹Ù„ÙŠ", logo: "https://lrfouargla.com/uploads/images/logos/1528-1663416912.png" },
                { name: "Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø·", logo: "https://lrfouargla.com/uploads/images/logos/50.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ ØªØ§Ø¬Ù…ÙˆØª", logo: "https://lrfouargla.com/uploads/images/logos/nirbt.png" },
                { name: "Ø§ØªØ­Ø§Ø¯.Ø¨Ø±ÙŠØ¯Ø©", logo: "https://lrfouargla.com/uploads/images/logos/2174-1665949908.png" },
                { name: "ØªØ±Ø¬ÙŠ Ù…Ø±Ù…Ø§Ø¯", logo: "https://lrfouargla.com/uploads/images/logos/51.png" },
                { name: "ÙˆØ¯Ø§Ø¯ Ø²Ù„ÙØ§Ù†Ø©", logo: "https://lrfouargla.com/uploads/images/logos/t%C3%A9l%C3%A9chargement%20(1).jpg" },
                { name: "Ø§Ù„Ø§Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø±Ø©", logo: "https://lrfouargla.com/uploads/images/logos/IMG-20231119-WA0010.jpg" },
                { name: "Ø£Ù…Ù„ Ø³ÙŠØ¯ÙŠ Ø¨ÙˆØ²ÙŠØ¯", logo: "https://lrfouargla.com/uploads/images/logos/49.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ Ø´Ø¨Ø§Ø¨ ØªØ§ØºÙŠØª", logo: "https://lrfouargla.com/uploads/images/logos/1855-1664293222.png" }
            ],
            "Ù‚Ø³Ù… Ù…Ø§ Ø¨ÙŠÙ† Ø§Ù„Ø±Ø§Ø¨Ø·Ø§Øª": [
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø§Ù„Ù†Ø²Ù„Ø©", logo: "https://lirf.org.dz/uploads/images/logos/3.png" },
                { name: "Ù†Ø§Ø¯ÙŠ ØªÙ‚Ø±Øª", logo: "https://lirf.org.dz/uploads/images/logos/received_257439396802495.jpeg" },
                { name: "Ø£ Ù…ØªÙ„ÙŠÙ„ÙŠ Ø§Ù„Ø´Ø¹Ø§Ù†Ø¨Ø©", logo: "https://lirf.org.dz/uploads/images/logos/5.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø®Ù†Ù‚", logo: "https://lirf.org.dz/uploads/images/logos/IRBKheneg.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø§Ù„Ø²Ø§ÙˆÙŠØ©", logo: "https://lirf.org.dz/uploads/images/logos/6.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ Ø¢ÙÙ„Ùˆ", logo: "https://lirf.org.dz/uploads/images/logos/407-1656244680.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ù‡Ù…Ø§ÙŠØ³Ø©", logo: "https://lirf.org.dz/uploads/images/logos/102.png" },
                { name: "Ù…Ø´Ø¹Ù„ Ø­Ø§Ø³ÙŠ Ù…Ø³Ø¹ÙˆØ¯", logo: "https://lirf.org.dz/uploads/images/logos/13.png" },
                { name: "Ø´Ø¨Ø§Ø¨ Ø¬Ø§Ù…Ø¹Ø©", logo: "https://lirf.org.dz/uploads/images/logos/39(1).png" },
                { name: "Ø±Ø§Ø¦Ø¯ Ù‚Ù„ØªØ©Ø³ Ø³Ø¹Ø¯", logo: "https://lirf.org.dz/uploads/images/logos/Gueltet%20Sidi%20Saad.png" },
                { name: "Ø§ÙˆÙ„Ù…Ø¨ÙŠ Ø§Ù„ÙˆØ§Ø¯", logo: "https://lirf.org.dz/uploads/images/logos/Olympique%20El-Oued.png" },
                { name: "Ø£ÙˆÙ„Ù…Ø¨ÙŠÙƒ Ø§Ù„Ù…Ù‚Ø±Ù†", logo: "https://lirf.org.dz/uploads/images/logos/8.png" },
                { name: "Ù†Ø¬ÙˆÙ… Ø§Ù„ÙŠØ²ÙŠ", logo: "https://lirf.org.dz/uploads/images/logos/16.png" },
                { name: "Ø¥ØªØ­Ø§Ø¯ Ø­Ø§Ø³ÙŠ Ø§Ù„Ø±Ù…Ù„", logo: "https://lirf.org.dz/uploads/images/logos/12.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ Ø³ÙˆÙ", logo: "https://lirf.org.dz/uploads/images/logos/412-1715352850.png" },
                { name: "Ø§ØªØ­Ø§Ø¯ ÙˆØ±Ù‚Ù„Ø©", logo: "https://lirf.org.dz/uploads/images/logos/414-1662939264.png" }
            ],
            "default": [
                { name: "ÙØ±ÙŠÙ‚ 1", logo: "" },
                { name: "ÙØ±ÙŠÙ‚ 2", logo: "" }
            ]
        };

        const { useState, useEffect } = React;

        // --- 2. Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª (Components) ---

        // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù„Ù„Ø¬Ù…Ù‡ÙˆØ±
        const MatchRow = ({ match }) => {
            const isLive = match.status.includes('Ø§Ù„Ø´ÙˆØ·') && match.status !== 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„';
            const isEnded = match.status === 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©';
            const [currentTime, setCurrentTime] = useState("");

            useEffect(() => {
                const calculateTime = () => {
                    let totalSeconds = match.time * 60;
                    if (match.isRunning && match.lastStartTime) {
                        const diffSecs = Math.floor((Date.now() - match.lastStartTime) / 1000);
                        totalSeconds += diffSecs;
                    }
                    const mm = Math.floor(totalSeconds / 60).toString().padStart(2, '0');
                    const ss = (totalSeconds % 60).toString().padStart(2, '0');
                    return `${mm}:${ss}`;
                };

                setCurrentTime(calculateTime());
                if (match.isRunning) {
                    const interval = setInterval(() => setCurrentTime(calculateTime()), 1000);
                    return () => clearInterval(interval);
                }
            }, [match.time, match.isRunning, match.lastStartTime]);

            let statusColor = "text-gray-500", statusBg = "bg-gray-100", statusBorder = "border-gray-200";
            if (isLive) { statusColor = "text-red-600"; statusBg = "bg-white"; statusBorder = "border-red-200"; }
            else if (isEnded) { statusColor = "text-emerald-600"; statusBg = "bg-emerald-50"; statusBorder = "border-emerald-100"; }
            else if (match.status === 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„') { statusColor = "text-orange-600"; statusBg = "bg-orange-50"; statusBorder = "border-orange-100"; }

            return (
                <div className="p-4 hover:bg-gray-50 transition-colors flex flex-col md:flex-row items-center justify-between gap-4 relative">
                    
                    {/* --- Ø¥ØµÙ„Ø§Ø­ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¬ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ --- */}
                    <div className="absolute top-2 left-2 md:hidden z-10">
                        <span className="bg-gray-100 text-gray-600 text-[10px] font-bold px-2 py-1 rounded border border-gray-200 shadow-sm">
                            J-{match.round}
                        </span>
                    </div>

                    <div className="flex flex-row md:flex-col items-center justify-center gap-2 md:w-24 shrink-0 order-1 md:order-1 mb-2 md:mb-0 w-full relative">
                        <div className={`px-2 py-1 rounded text-[10px] font-bold border ${statusBg} ${statusColor} ${statusBorder} text-center min-w-[70px]`}>
                            {match.status === 'Ù„Ù… ØªØ¨Ø¯Ø£' ? 'Not Started' : match.status}
                        </div>
                        {isLive && (
                            <div className="flex items-center gap-1 text-emerald-600 absolute md:static right-0 md:right-auto top-0 md:top-auto">
                                <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-sm"></span>
                                <span className="text-sm font-mono font-black tracking-wider">{currentTime}</span>
                            </div>
                        )}
                    </div>
                    <div className="flex-1 flex items-center justify-between w-full md:w-auto px-2 order-2 md:order-2">
                        <div className="flex-1 flex items-center justify-end gap-3 text-right">
                            <span className="font-bold text-gray-800 text-sm md:text-base leading-tight truncate pl-1">{match.home}</span>
                            <img src={match.homeLogo || "https://placehold.co/40x40?text=H"} className="w-8 h-8 md:w-10 md:h-10 object-contain drop-shadow-sm" onError={(e) => (e.currentTarget.src = 'https://cdn-icons-png.flaticon.com/512/53/53283.png')} />
                        </div>
                        <div className="mx-2 md:mx-8 flex items-center justify-center min-w-[60px]">
                            {match.status !== 'Ù„Ù… ØªØ¨Ø¯Ø£' ? (
                                <div className="flex items-center gap-2 md:gap-3 text-xl md:text-2xl font-black text-gray-800 bg-gray-100 px-3 md:px-4 py-1 rounded-lg border border-gray-200">
                                    <span>{match.scoreH}</span>
                                    <span className="text-gray-400 text-lg font-light">-</span>
                                    <span>{match.scoreA}</span>
                                </div>
                            ) : (
                                <span className="text-gray-300 font-bold text-xl bg-gray-50 px-3 py-1 rounded">-</span>
                            )}
                        </div>
                        <div className="flex-1 flex items-center justify-start gap-3 text-left">
                            <img src={match.awayLogo || "https://placehold.co/40x40?text=A"} className="w-8 h-8 md:w-10 md:h-10 object-contain drop-shadow-sm" onError={(e) => (e.currentTarget.src = 'https://cdn-icons-png.flaticon.com/512/53/53283.png')} />
                            <span className="font-bold text-gray-800 text-sm md:text-base leading-tight truncate pr-1">{match.away}</span>
                        </div>
                    </div>
                    <div className="hidden md:block text-xs text-gray-400 w-24 text-left order-3">
                        {match.round ? `J-${match.round}` : ''}
                    </div>
                </div>
            );
        };

        const MatchListPublic = ({ matches }) => {
            if (matches.length === 0) {
                return (
                    <div className="flex flex-col items-center justify-center py-20 text-gray-400">
                        <svg className="w-16 h-16 mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <p className="text-lg font-medium">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¬Ø§Ø±ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                    </div>
                );
            }
            const groupedMatches = matches.reduce((acc, match) => {
                (acc[match.league] = acc[match.league] || []).push(match);
                return acc;
            }, {});

            return (
                <div className="w-full max-w-4xl mx-auto space-y-6">
                    {Object.entries(groupedMatches).map(([leagueName, leagueMatches]) => (
                        <div key={leagueName} className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                            <div className="bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between">
                                <div className="flex items-center gap-2">
                                    <span className="w-1 h-5 bg-emerald-500 rounded-full"></span>
                                    <h2 className="font-bold text-gray-800 text-sm md:text-base">{leagueName}</h2>
                                </div>
                                <span className="text-xs font-semibold text-gray-500 bg-white px-2 py-1 border rounded shadow-sm">{leagueMatches.length} Ù…Ø¨Ø§Ø±ÙŠØ§Øª</span>
                            </div>
                            <div className="divide-y divide-gray-100">
                                {leagueMatches.map((m) => <MatchRow key={m.id} match={m} />)}
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø´Ø±Ù (Admin)
        const AdminMatchCard = ({ match }) => {
            const [scoreH, setScoreH] = useState(match.scoreH);
            const [scoreA, setScoreA] = useState(match.scoreA);
            const [scorersH, setScorersH] = useState(match.scorersH);
            const [scorersA, setScorersA] = useState(match.scorersA);
            const [status, setStatus] = useState(match.status);
            const [editMinutes, setEditMinutes] = useState(match.time || 0);
            const [displayTime, setDisplayTime] = useState("00:00");

            useEffect(() => {
                const calculateTime = () => {
                    const safeTime = Number(match.time || 0);
                    let totalSeconds = safeTime * 60;
                    if (match.isRunning && match.lastStartTime) {
                        const diffSecs = Math.floor((Date.now() - match.lastStartTime) / 1000);
                        totalSeconds += diffSecs;
                    }
                    const mm = Math.floor(totalSeconds / 60).toString().padStart(2, '0');
                    const ss = (totalSeconds % 60).toString().padStart(2, '0');
                    return `${mm}:${ss}`;
                };
                setDisplayTime(calculateTime());
                if (match.isRunning) {
                    const interval = setInterval(() => setDisplayTime(calculateTime()), 1000);
                    return () => clearInterval(interval);
                }
            }, [match.time, match.isRunning, match.lastStartTime]);

            const toggleTimer = async (start) => {
                if (!match.id) return;
                try {
                    const updateData = start 
                        ? { isRunning: true, lastStartTime: Date.now(), time: Number(editMinutes) }
                        : { isRunning: false, lastStartTime: null, time: Number(editMinutes) }; 
                    await db.collection("matches").doc(match.id).update(updateData);
                } catch (e) { alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª"); }
            };

            const handleSave = async () => {
                if (!match.id) return;
                try {
                    let updateData = { scoreH: Number(scoreH), scoreA: Number(scoreA), scorersH, scorersA, status };
                    if (!match.isRunning) updateData.time = Number(editMinutes);
                    await db.collection("matches").doc(match.id).update(updateData);
                    // ÙˆÙ…ÙŠØ¶ Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
                    alert("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸"); 
                } catch (e) { alert("Ø®Ø·Ø£"); }
            };

            const handleDelete = async () => {
                if (window.confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
                    await db.collection("matches").doc(match.id).delete();
                }
            };

            return (
                <div className="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-6">
                    {/* Header: League & Round */}
                     <div className="bg-gray-50 px-4 py-2 border-b border-gray-200 flex justify-between items-center text-xs text-gray-600 font-medium">
                        <span className="truncate">{match.league}</span>
                        <span className="bg-white px-2 py-0.5 border rounded-md shadow-sm">Ø§Ù„Ø¬ÙˆÙ„Ø© {match.round}</span>
                    </div>
                    
                    <div className="p-4 flex flex-col gap-4">
                        
                        {/* 1. Teams & Score Control (Big for Touch) */}
                        <div className="flex items-center justify-between gap-2 bg-slate-50 p-3 rounded-xl border border-gray-200">
                            {/* Home */}
                            <div className="flex flex-col items-center w-20 text-center">
                                <img src={match.homeLogo} className="w-10 h-10 object-contain mb-1" alt="" />
                                <span className="text-[10px] font-bold text-gray-800 leading-tight line-clamp-2">{match.home}</span>
                            </div>
                            
                            {/* Score Inputs */}
                            <div className="flex items-center gap-3">
                                <input type="number" value={scoreH} onChange={(e) => setScoreH(Number(e.target.value))} className="w-12 h-12 text-center font-bold border-2 border-gray-300 rounded-xl text-xl focus:border-emerald-500 outline-none bg-white shadow-sm" />
                                <span className="text-gray-400 font-light text-xl">-</span>
                                <input type="number" value={scoreA} onChange={(e) => setScoreA(Number(e.target.value))} className="w-12 h-12 text-center font-bold border-2 border-gray-300 rounded-xl text-xl focus:border-emerald-500 outline-none bg-white shadow-sm" />
                            </div>

                            {/* Away */}
                            <div className="flex flex-col items-center w-20 text-center">
                                <img src={match.awayLogo} className="w-10 h-10 object-contain mb-1" alt="" />
                                <span className="text-[10px] font-bold text-gray-800 leading-tight line-clamp-2">{match.away}</span>
                            </div>
                        </div>

                        {/* 2. Controls Row (Stacked on Mobile) */}
                        <div className="flex flex-col gap-3">
                            
                            {/* Timer & Status Group */}
                            <div className="flex gap-2">
                                {/* Status Select */}
                                <select value={status} onChange={(e) => setStatus(e.target.value)} className="h-12 flex-1 text-sm font-medium border border-gray-300 rounded-lg bg-white text-gray-800 outline-none px-2 shadow-sm">
                                    <option value="Ù„Ù… ØªØ¨Ø¯Ø£">â­• Ù„Ù… ØªØ¨Ø¯Ø£</option>
                                    <option value="Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„">ğŸŸ¢ Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„</option>
                                    <option value="Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„">â˜• Ø§Ø³ØªØ±Ø§Ø­Ø©</option>
                                    <option value="Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø«Ø§Ù†ÙŠ">ğŸŸ¢ Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
                                    <option value="Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©">ğŸ Ø§Ù†ØªÙ‡Øª</option>
                                </select>

                                {/* Timer Control */}
                                <div className="flex items-center bg-gray-100 rounded-lg border border-gray-200 px-2 h-12 gap-1 shadow-sm">
                                    <button onClick={() => toggleTimer(false)} disabled={!match.isRunning} className={`w-8 h-8 flex items-center justify-center rounded-md text-white font-bold shadow-sm ${!match.isRunning ? 'bg-gray-300' : 'bg-orange-500'}`}>||</button>
                                    
                                    <div className="flex flex-col items-center mx-1">
                                        <span className="font-mono font-bold text-emerald-600 text-xs w-10 text-center leading-none mb-0.5">{displayTime}</span>
                                        <input type="number" value={editMinutes} onChange={(e) => setEditMinutes(Number(e.target.value))} className="w-8 text-center text-[10px] font-bold bg-white border border-gray-300 rounded h-4 outline-none p-0" />
                                    </div>
                                    
                                    <button onClick={() => toggleTimer(true)} disabled={match.isRunning} className={`w-8 h-8 flex items-center justify-center rounded-md text-white font-bold shadow-sm ${match.isRunning ? 'bg-gray-300' : 'bg-emerald-500'}`}>â–¶</button>
                                </div>
                            </div>

                            {/* Action Buttons (Full Width) */}
                            <div className="flex gap-2">
                                <button onClick={handleSave} className="flex-1 h-10 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow font-bold text-sm gap-2">
                                    <span>ğŸ’¾</span> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
                                </button>
                                <button onClick={handleDelete} className="w-14 h-10 flex items-center justify-center bg-red-100 text-red-600 hover:bg-red-200 border border-red-200 rounded-lg shadow-sm font-bold">
                                    <span>ğŸ—‘</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 3. Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ---

        const App = () => {
            const [view, setView] = useState('public');
            const [user, setUser] = useState(null);
            const [matches, setMatches] = useState([]);
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [league, setLeague] = useState('');
            const [round, setRound] = useState('1');
            const [home, setHome] = useState('');
            const [away, setAway] = useState('');
            const [homeLogo, setHomeLogo] = useState('');
            const [awayLogo, setAwayLogo] = useState('');

            useEffect(() => {
                const unsubscribeAuth = auth.onAuthStateChanged(setUser);
                const unsubscribeMatches = db.collection("matches").onSnapshot((snapshot) => {
                    const ms = [];
                    snapshot.forEach((doc) => ms.push({ id: doc.id, ...doc.data() }));
                    setMatches(ms);
                });
                return () => { unsubscribeAuth(); unsubscribeMatches(); };
            }, []);

            const handleLogin = async (e) => {
                e.preventDefault();
                try { await auth.signInWithEmailAndPassword(email, password); } catch (e) { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„"); }
            };

            const handleTeamSelect = (isHome, teamName) => {
                const teamData = LEAGUES_DATA[league] || LEAGUES_DATA['default'];
                const team = teamData.find(t => t.name === teamName);
                const logo = team ? team.logo : '';
                if (isHome) { setHome(teamName); setHomeLogo(logo); }
                else { setAway(teamName); setAwayLogo(logo); }
            };

            const handleAddMatch = async () => {
                if (!league || !home || !away) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© ÙˆØ§Ù„ÙØ±ÙŠÙ‚ÙŠÙ†");
                try {
                    await db.collection("matches").add({
                        league, round, home, away, homeLogo, awayLogo,
                        scoreH: 0, scoreA: 0, scorersH: "", scorersA: "",
                        status: "Ù„Ù… ØªØ¨Ø¯Ø£", time: 0, isRunning: false, lastStartTime: null
                    });
                    setHome(''); setAway(''); alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­");
                } catch (e) { alert("Error adding match"); }
            };

            const Header = () => (
                <header className="bg-white border-b border-emerald-100 shadow-sm sticky top-0 z-50">
                    <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <img src="https://i.top4top.io/p_3636li6n50.jpg" className="w-10 h-10 rounded-full object-cover border border-emerald-100 shadow-sm" />
                            <div className="hidden md:block">
                                <h1 className="font-bold text-lg leading-none text-emerald-900">Kooora Laghouat</h1>
                                <p className="text-[10px] text-emerald-500 uppercase tracking-widest font-bold">Live Score</p>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            <a href="https://www.facebook.com/Kooralghouat" target="_blank" className="flex items-center gap-2 bg-[#1877F2] text-white px-3 py-1.5 rounded-full text-xs font-bold hover:bg-[#166fe5] transition shadow-sm">
                                <span>ØªØ§Ø¨Ø¹Ù†Ø§</span>
                            </a>
                            <button onClick={() => setView('admin')} className="text-xs text-gray-500 hover:text-emerald-600 font-medium px-2 py-1 rounded transition">
                                {user ? 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' : 'Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù'}
                            </button>
                        </div>
                    </div>
                </header>
            );

            if (view === 'public') {
                return (
                    <div className="min-h-screen bg-gray-50 pb-10">
                        <Header />
                        <div className="max-w-4xl mx-auto px-4 mt-6">
                            <div className="flex items-center gap-2 mb-6 border-b border-gray-200 pb-2">
                                <span className="w-2 h-2 rounded-full bg-red-600 animate-pulse"></span>
                                <h2 className="text-xl font-bold text-gray-800">Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</h2>
                            </div>
                            <MatchListPublic matches={matches} />
                        </div>
                    </div>
                );
            }

            if (!user) {
                return (
                    <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4">
                        <div className="max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
                            <div className="bg-emerald-600 p-8 text-center relative overflow-hidden">
                                <h2 className="text-2xl font-bold text-white relative z-10">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                            </div>
                            <form onSubmit={handleLogin} className="p-8 space-y-4">
                                <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" className="w-full p-3 border rounded-lg" value={email} onChange={e => setEmail(e.target.value)} />
                                <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" className="w-full p-3 border rounded-lg" value={password} onChange={e => setPassword(e.target.value)} />
                                <button type="submit" className="w-full py-3 bg-emerald-600 text-white rounded-lg font-bold">Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†</button>
                            </form>
                            <button onClick={() => setView('public')} className="block w-full text-center py-4 text-sm text-gray-500">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gray-50 pb-24"> {/* Added extra padding at bottom */}
                    <nav className="bg-white border-b border-gray-200 sticky top-0 z-40 px-6 py-3 shadow-sm">
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <h3 className="font-bold text-gray-800">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
                            <div className="flex gap-2">
                                <button onClick={() => setView('public')} className="px-4 py-2 text-sm font-medium">Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
                                <button onClick={() => auth.signOut()} className="px-4 py-2 text-sm font-bold text-white bg-red-500 rounded-lg">Ø®Ø±ÙˆØ¬</button>
                            </div>
                        </div>
                    </nav>
                    <div className="max-w-6xl mx-auto px-4 mt-8">
                        <div className="bg-white rounded-lg shadow-sm border border-emerald-100 p-4 mb-8">
                            <h4 className="text-emerald-600 font-bold mb-4">Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø© Ø¬Ø¯ÙŠØ¯Ø©</h4>
                            <div className="flex flex-col gap-3">
                                <div className="flex gap-3">
                                    <select className="flex-1 p-2 bg-gray-50 border rounded text-sm h-10" value={league} onChange={(e) => { setLeague(e.target.value); setHome(''); setAway(''); }}>
                                        <option value="" disabled>-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© --</option>
                                        {Object.keys(LEAGUES_DATA).filter(k => k !== 'default').map(k => <option key={k} value={k}>{k}</option>)}
                                        <option value="Ø´Ø±ÙÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø·">Ø´Ø±ÙÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø·</option>
                                        <option value="ÙˆÙ„Ø§Ø¦ÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø·">ÙˆÙ„Ø§Ø¦ÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø·</option>
                                        <option value="ÙƒØ£Ø³ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ©">ÙƒØ£Ø³ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© ğŸ†</option>
                                    </select>
                                    <select className="w-1/3 p-2 bg-gray-50 border rounded text-sm h-10" value={round} onChange={e => setRound(e.target.value)}>
                                        {Array.from({length: 50}, (_, i) => i + 1).map(num => <option key={num} value={num}>Ø¬-{num}</option>)}
                                    </select>
                                </div>
                                <div className="flex flex-col md:flex-row gap-3">
                                    <select className="flex-1 p-2 bg-gray-50 border rounded text-sm h-10" value={home} onChange={(e) => handleTeamSelect(true, e.target.value)}>
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ¶ÙŠÙ</option>
                                        {(LEAGUES_DATA[league] || LEAGUES_DATA['default']).map(t => <option key={t.name} value={t.name}>{t.name}</option>)}
                                    </select>
                                    <select className="flex-1 p-2 bg-gray-50 border rounded text-sm h-10" value={away} onChange={(e) => handleTeamSelect(false, e.target.value)}>
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¶ÙŠÙ</option>
                                        {(LEAGUES_DATA[league] || LEAGUES_DATA['default']).map(t => <option key={t.name} value={t.name}>{t.name}</option>)}
                                    </select>
                                    <button onClick={handleAddMatch} className="w-full md:w-32 py-2 bg-emerald-500 text-white rounded font-bold hover:bg-emerald-600 text-sm h-10">Ù†Ø´Ø±</button>
                                </div>
                            </div>
                        </div>
                        <div className="space-y-4">
                            {matches.map(m => <AdminMatchCard key={m.id} match={m} />)}
                            {matches.length === 0 && <div className="text-center text-gray-400 py-10">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª</div>}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>